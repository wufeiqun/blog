## 背景介绍

如果使用云厂商的服务器的话, 一般NTP会自动配置, 如果是自建的IDC机房, 自己安装的服务器的话就需要关注服务器的时间同步问题, 因为有一些接口的签名过期时间会用到本地的时间, 如果服务器的时间不对会影响业务的稳定性, 特别是一些集群的签名.

现在的Linux系统一般使用的是chronyd这个服务来配置NTP的时间同步, 这里简单介绍常见的配置方式.

## chrony配置文件

这里采用RockyLinux9来说明, 一般来说系统会自动安装该服务, 配置文件的位置为`/etc/chrony.conf`. 镜像默认的NTP服务器可能是国外的, 这里可以统一采用国内的, 更加稳定一些, 只需要修改如下:

```
# 用 server 是固定上游、稳定可控；用 pool 是动态池、高可用。
# 生产中一般两者混合用：pool 做冗余，server 做高质量上游。

server ntp.aliyun.com iburst
server ntp.tencent.com iburst
server ntp.ntsc.ac.cn iburst
pool cn.pool.ntp.org iburst maxsources 4
```

## chrony常见操作命令

* 查看运行情况

```
systemctl status chronyd
```

* 查看日志

```
journalctl -f -u chronyd
```
